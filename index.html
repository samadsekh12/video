<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Video Player</title>
  <style>
    :root { color-scheme: light dark; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      margin: 0; padding: 2rem;
      display: grid; place-items: start center;
      background: Canvas; color: CanvasText;
    }
    .container { width: min(900px, 100%); }
    .player {
      aspect-ratio: 16 / 9;
      background: #111;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.15);
    }
    video { width: 100%; height: 100%; display: block; }
    .controls {
      display: flex; gap: .75rem; align-items: center; margin-top: 1rem; flex-wrap: wrap;
    }
    label.button {
      border: 1px solid #444; padding: .5rem .9rem; border-radius: .5rem;
      cursor: pointer; background: color-mix(in srgb, Canvas 90%, CanvasText 10%);
    }
    input[type="file"] { display: none; }
    small { opacity: .8; }
    details { margin-top: 1rem; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Video Player</h1>

    <div class="player">
      <video id="video" controls preload="metadata" poster="poster.jpg">
        <!-- Replace with your sources or use the Choose Video button -->
        <source src="sample.mp4" type="video/mp4" />
        <source src="sample.webm" type="video/webm" />
        <track label="English" kind="subtitles" srclang="en" src="subtitles.vtt" default />
        Your browser does not support the HTML5 video tag.
      </video>
    </div>

    <div class="controls">
      <label class="button">
        <input id="file" type="file" accept="video/*" />
        Choose Video…
      </label>

      <label class="button">
        <input id="subtitle" type="file" accept=".vtt,text/vtt" />
        Add Subtitles (.vtt)…
      </label>

      <small id="filename">Now playing: sample.mp4</small>
    </div>

    <details>
      <summary>Embed a YouTube/Vimeo video (optional)</summary>
      <div style="margin-top:.75rem">
        <div style="position:relative;padding-top:56.25%;overflow:hidden;border-radius:12px;">
          <iframe
            src="https://www.youtube.com/embed/dQw4w9WgXcQ"
            title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
            style="position:absolute;inset:0;width:100%;height:100%;border:0;">
          </iframe>
        </div>
      </div>
    </details>
  </div>

  <script>
    (function() {
      const video = document.getElementById('video');
      const fileInput = document.getElementById('file');
      const subInput = document.getElementById('subtitle');
      const filename = document.getElementById('filename');
      let currentSrcUrl = null;
      let currentTrackUrl = null;

      fileInput?.addEventListener('change', () => {
        const file = fileInput.files?.[0];
        if (!file) return;
        if (currentSrcUrl) URL.revokeObjectURL(currentSrcUrl);
        currentSrcUrl = URL.createObjectURL(file);
        video.src = currentSrcUrl;
        video.play().catch(() => {});
        filename.textContent = 'Now playing: ' + (file.name || 'Selected video');
      });

      subInput?.addEventListener('change', () => {
        const file = subInput.files?.[0];
        if (!file) return;
        if (currentTrackUrl) URL.revokeObjectURL(currentTrackUrl);
        currentTrackUrl = URL.createObjectURL(file);

        // Remove existing tracks
        [...video.querySelectorAll('track')].forEach(t => t.remove());

        const track = document.createElement('track');
        track.kind = 'subtitles';
        track.label = 'Subtitles';
        track.srclang = 'en';
        track.src = currentTrackUrl;
        track.default = true;
        video.appendChild(track);

        // Ensure subtitles show on some browsers
        if (video.textTracks && video.textTracks[0]) {
          video.textTracks[0].mode = 'showing';
        }
      });

      window.addEventListener('unload', () => {
        if (currentSrcUrl) URL.revokeObjectURL(currentSrcUrl);
        if (currentTrackUrl) URL.revokeObjectURL(currentTrackUrl);
      });
    })();
  </script>
</body>
</html>
